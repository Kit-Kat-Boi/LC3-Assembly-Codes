;This code creates a user interface to see if a student is "in the room" with a linked list.
;First prompts a user to type an EID and then searches through the linked list to see if the student is present or not.
        .ORIG x3000
    ; Prompts user to type their EID
    
        LEA R0, Prompt
        PUTS
        
    ; Read and store user's EID
    
        LEA R1, Type
        LD R2, Enter
Loop1   GETC
        OUT
        ADD R3, R2, R0
        BRZ Next
        STR R0, R1, #0
        ADD R1, R1, #1
        BR Loop1
Next    AND R4, R4, #0
        STR R4, R1, #0
        
    ; Searched link list for match
    
        LDI R0, HeadPTR
       
B       ADD R1, R0, R4
        BRNP Compare
        
        ;No more nodes to check
        LEA R0, Type
        PUTS
        LEA R0, Msg
        PUTS
        BR Done
        
Compare 
        LDR R1, R0, #1
        LEA R2, Type
        JSR MATCH
        ADD R4, R4, #0
        BRP already
        LDR R0, R0, #0
        BR B
        
already LEA R0, Type
        PUTS
        LEA R0, Msg2
        PUTS
        BR Done
        
        
Done    HALT
    
MATCH   
        ST R7, Save
    A   LDR R5, R1, #0
        LDR R6, R2, #0
        ADD R6, R6, #0
        BRZ yes
        NOT R6, R6
        ADD R6, R6, #1
        ADD R5, R5, R6
        ADD R5, R5, #0
        BRNP no
        ADD R1, R1, #1
        ADD R2, R2, #1
        BR A
        
    yes AND R4, R4, #0
        ADD R4, R4, #1
        BR back
        
    no  AND R4, R4, #0
        BR back
        
    back
        AND R5, R5, #0
        AND R5, R6, #0
        LD R7, Save
        JMP R7
    
Type    .BLKW x6
Enter   .FILL x-0A
HeadPTR .FILL x4000
Save    .BLKW #1
Prompt  .STRINGZ "Type EID and press Enter: "
Msg     .STRINGZ " is not in the main room."
Msg2    .STRINGZ " is already in the main room."


        .END
